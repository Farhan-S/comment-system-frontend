{
  "info": {
    "_postman_id": "7c0aa2e9-d28a-496f-83cc-c4c5489372ec",
    "name": "Comment System API",
    "description": "Complete API collection for Comment System with authentication, CRUD operations, likes/dislikes, and more.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "26812602",
    "_collection_link": "https://gold-star-39065.postman.co/workspace/My-Workspace~bf28a7be-1cd2-499b-88da-ab4dd21e50d8/collection/26812602-7c0aa2e9-d28a-496f-83cc-c4c5489372ec?action=share&source=collection_link&creator=26812602"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('authToken', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"Password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            },
            "description": "Register a new user account. Returns user data and JWT token."
          },
          "response": []
        },
        {
          "name": "Login User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('authToken', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"Password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            },
            "description": "Login with email and password. Returns user data and JWT token."
          },
          "response": []
        },
        {
          "name": "Get Current User",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "me"]
            },
            "description": "Get current authenticated user profile. Requires JWT token."
          },
          "response": []
        }
      ],
      "description": "Authentication endpoints for user registration and login"
    },
    {
      "name": "Comments",
      "item": [
        {
          "name": "Get All Comments",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments?page=1&limit=10&sort=newest",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                },
                {
                  "key": "sort",
                  "value": "newest",
                  "description": "Sort by: newest, mostLiked, mostDisliked"
                }
              ]
            },
            "description": "Get all comments with pagination and sorting options"
          },
          "response": []
        },
        {
          "name": "Get Comment by ID",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{commentId}}"
                }
              ]
            },
            "description": "⚠️ IMPORTANT: Set {{commentId}} variable with a valid comment ID.\n\nGet a specific comment by ID. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Create Comment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"This is my comment!\",\n  \"parentComment\": null\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/comments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments"]
            },
            "description": "Create a new comment. Requires authentication. Set parentComment to create a reply."
          },
          "response": []
        },
        {
          "name": "Create Reply",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"This is a reply to the comment!\",\n  \"parentComment\": \"{{commentId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/comments",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments"]
            },
            "description": "⚠️ IMPORTANT: First create a comment, copy its _id, then set {{commentId}} variable.\n\nCreate a reply to an existing comment. Set parentComment to the ID of the parent comment."
          },
          "response": []
        },
        {
          "name": "Update Comment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"Updated comment content\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/comments/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{commentId}}"
                }
              ]
            },
            "description": "⚠️ IMPORTANT: Set {{commentId}} variable with YOUR comment ID.\n\nUpdate a comment. Only the comment owner can update. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Delete Comment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments/:id",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{commentId}}"
                }
              ]
            },
            "description": "⚠️ IMPORTANT: Set {{commentId}} variable with YOUR comment ID.\n\nDelete a comment. Only the comment owner can delete. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Like Comment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments/:id/like",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments", ":id", "like"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{commentId}}"
                }
              ]
            },
            "description": "⚠️ IMPORTANT: Set {{commentId}} variable with a valid comment ID.\n\nLike a comment. User can like only once. If already disliked, switches to like. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Dislike Comment",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments/:id/dislike",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments", ":id", "dislike"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{commentId}}"
                }
              ]
            },
            "description": "⚠️ IMPORTANT: Set {{commentId}} variable with a valid comment ID.\n\nDislike a comment. User can dislike only once. If already liked, switches to dislike. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Get Comments - Sort by Most Liked",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments?page=1&limit=10&sort=mostLiked",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sort",
                  "value": "mostLiked"
                }
              ]
            },
            "description": "Get comments sorted by most liked. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Get Comments - Sort by Most Disliked",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments?page=1&limit=10&sort=mostDisliked",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "sort",
                  "value": "mostDisliked"
                }
              ]
            },
            "description": "Get comments sorted by most disliked. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Get Comment Replies",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments/:id/replies?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments", ":id", "replies"],
              "query": [
                {
                  "key": "page",
                  "value": "1",
                  "description": "Page number"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "Items per page"
                }
              ],
              "variable": [
                {
                  "key": "id",
                  "value": "{{commentId}}",
                  "description": "Parent comment ID"
                }
              ]
            },
            "description": "⚠️ IMPORTANT: Set {{commentId}} variable with a valid comment ID.\n\nGet all replies for a specific comment with pagination. Requires authentication."
          },
          "response": []
        },
        {
          "name": "Get Top-Level Comments Only",
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": [
                {
                  "key": "token",
                  "value": "{{authToken}}",
                  "type": "string"
                }
              ]
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/comments?page=1&limit=10&parentComment=null",
              "host": ["{{baseUrl}}"],
              "path": ["api", "comments"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "parentComment",
                  "value": "null",
                  "description": "Filter for top-level comments only (no parent)"
                }
              ]
            },
            "description": "Get only top-level comments (comments without a parent)"
          },
          "response": []
        }
      ],
      "description": "Comment CRUD operations, likes/dislikes, and sorting"
    },
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/health",
          "host": ["{{baseUrl}}"],
          "path": ["health"]
        },
        "description": "Check if API server is running and healthy"
      },
      "response": []
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "commentId",
      "value": "",
      "type": "string"
    }
  ]
}
